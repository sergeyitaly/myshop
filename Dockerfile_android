# Use the android SDK image as a base image for building the APK
FROM mobiledevops/android-sdk-image:latest AS android-build

# Set the working directory for the Android app
WORKDIR /app/android

# Copy your Android project into the container
COPY android/ /app/android/

# Run the Gradle build process to clean and assemble the release APK
RUN ./gradlew clean assembleRelease

# Copy the APK output from the build stage to the final image
COPY --from=android-build /app/android/app/build/outputs/apk/release/app-release.apk /app/app-release.apk

# Copy the rest of the files from your existing Django container (if needed)
COPY . .

# Check the files in the final image
RUN ls -al
